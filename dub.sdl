name "nurt"
description "Numem based D Runtime"
authors "Luna"
copyright "Copyright Â© 2025, Luna"
license "BSL-1.0"

targetPath "out/"

dependency "numem" version=">=1.0.5"

lflags "-rpath=." platform="linux"

configuration "ldc" {
    platforms "ldc"
    
    targetType "dynamicLibrary"
    
    dflags "-defaultlib="
    lflags "-nostdlib" platform="posix"
}

configuration "ldc-static" {
    platforms "ldc"
    
    targetType "staticLibrary"
    
    dflags "-defaultlib="
    lflags "-nostdlib" platform="posix"
}

configuration "dmd" {
    platforms "dmd"
    
    targetType "dynamicLibrary"
    
    dflags "-defaultlib="
    lflags "-nostdlib" platform="posix"
}

configuration "dmd-static" {
    platforms "dmd"
    
    targetType "staticLibrary"
    
    dflags "-defaultlib="
    lflags "-nostdlib" platform="posix"
}

configuration "gdc" {
    platforms "gdc"
    
    targetType "dynamicLibrary"
    
    dflags "-nophoboslib"
    lflags "-nostdlib" platform="posix"
}

configuration "gdc-static" {
    platforms "gdc"
    
    targetType "staticLibrary"
    
    dflags "-nophoboslib"
    lflags "-nostdlib" platform="posix"
}

// During unittests we basically don't want our runtime to take over.
configuration "unittest" {
    targetType "none"
}